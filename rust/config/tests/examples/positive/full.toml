# Comprehensive Stencila configuration using all features

[workspace]
id = "ws1234567890"

[site]
domain = "docs.example.org"
root = "site"
exclude = ["**/*.draft.md", "_drafts/**", "node_modules/**"]

[site.routes]
# File routes
"/" = "index.md"
"/about/" = "about/README.md"
"/docs/" = "documentation/index.smd"

# Redirect routes
"/old-docs/" = { redirect = "/docs/", status = 301 }
"/legacy/" = { redirect = "https://legacy.example.org" }

# Spread routes
"/{region}/report/" = { file = "reports/regional.smd", arguments = { region = ["americas", "emea", "apac"] } }
"/{year}/{quarter}/" = { file = "quarterly.smd", spread = "zip", arguments = { year = ["2024", "2024"], quarter = ["Q1", "Q2"] } }

[remotes]
# Simple URL remotes
"site" = "https://example.stencila.site/"

# Remote with watch
"docs/main.md" = { url = "https://docs.google.com/document/d/main123/edit", watch = "wa1234567890" }

# Multiple remotes for one path
"shared.md" = [
  { url = "https://docs.google.com/document/d/shared1/edit", watch = "waabcdef1234" },
  "https://backup.sharepoint.com/shared"
]

# Spread remote
"report.smd" = { service = "gdoc", title = "Report {region}", arguments = { region = ["north", "south", "east", "west"] } }

[outputs]
# Simple rendered output
"report.pdf" = "report.md"

# Static file output
"data/results.csv" = {}

# Output with explicit command
"report.docx" = { source = "report.md", command = "render" }

# Pattern output
"exports/*.csv" = { pattern = "exports/*.csv" }

# Spread output
"{region}/report.pdf" = { source = "report.md", arguments = { region = ["north", "south"] } }

# Output with ref filtering
"release/report.pdf" = { source = "report.md", refs = ["main", "release/*"] }

# MCP servers
[mcp.servers.filesystem]
transport.type = "stdio"
transport.command = "npx"
transport.args = ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"]

[mcp.servers.remote-api]
name = "Remote API"
transport.type = "http"
transport.url = "https://api.example.com/mcp"
