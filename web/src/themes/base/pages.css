/* Page styling
 *
 * Page layout semantic tokens for paged media (@page rules). Note that
 * component print variants are handled separately by `-print` variants.
 */

:root {
    /* Page dimensions defaults to A4 */
    --page-height: 297mm;
    --page-width: 210mm;

    /* Page margins - margin boxes around page */
    --page-margin-vertical: 1.5cm;
    --page-margin-horizontal: 2cm;
    --page-margin-top: var(--page-margin-vertical);
    --page-margin-right: var(--page-margin-horizontal);
    --page-margin-bottom: var(--page-margin-vertical);
    --page-margin-left: var(--page-margin-horizontal);

    /* Page padding - space between content and margin boxes */
    --page-padding: 0.5cm;
    --page-padding-top: var(--page-padding);
    --page-padding-bottom: var(--page-padding);

    /* Available content dimensions for a page
     * JavaScript reads these computed values (in pixels) to scale content to fit pages. */
    --page-content-height: calc(var(--page-height) - var(--page-margin-top) - var(--page-margin-bottom) - var(--page-padding-top) - var(--page-padding-bottom));
    --page-content-width: calc(var(--page-width) - var(--page-margin-left) - var(--page-margin-right));

    /* Page Margin Box Styling */
    --page-margin-font-family: var(--font-family-sans);
    --page-margin-font-size: 8pt;
    --page-margin-line-height: var(--line-height-tight);
    --page-margin-color: var(--text-color-secondary);
    --page-margin-padding: 0;

    /* Page Margin Box Content - Set these to control margin content */
    --page-top-left-content: none;
    --page-top-center-content: none;
    --page-top-right-content: none;
    --page-bottom-left-content: none;
    --page-bottom-center-content: none;
    --page-bottom-right-content: none;

    /* First Page Margin Box Content - Defaults to regular margin content */
    --page1-top-left-content: var(--page-top-left-content);
    --page1-top-center-content: var(--page-top-center-content);
    --page1-top-right-content: var(--page-top-right-content);
    --page1-bottom-left-content: var(--page-bottom-left-content);
    --page1-bottom-center-content: var(--page-bottom-center-content);
    --page1-bottom-right-content: var(--page-bottom-right-content);

    /* Page Margin Box Borders - Hierarchical token system */

    /* Level 1: General border tokens (apply to all margins) */
    --page-border-style: solid;
    --page-border-color: var(--border-color-default);
    --page-border-narrow: initial;
    --page-border-wide: initial;
    --page-border-full: initial;

    /* Level 2: Horizontal border tokens (apply to both top and bottom) */
    --page-horizontal-border-style: var(--page-border-style);
    --page-horizontal-border-color: var(--page-border-color);
    --page-horizontal-border-narrow: var(--page-border-narrow);
    --page-horizontal-border-wide: var(--page-border-wide);
    --page-horizontal-border-full: var(--page-border-full);

    /* Level 3: Specific border tokens (individual top/bottom overrides) */
    --page-top-border-style: var(--page-horizontal-border-style);
    --page-top-border-color: var(--page-horizontal-border-color);
    --page-top-border-narrow: var(--page-horizontal-border-narrow);
    --page-top-border-wide: var(--page-horizontal-border-wide);
    --page-top-border-full: var(--page-horizontal-border-full);
    --page-bottom-border-style: var(--page-horizontal-border-style);
    --page-bottom-border-color: var(--page-horizontal-border-color);
    --page-bottom-border-narrow: var(--page-horizontal-border-narrow);
    --page-bottom-border-wide: var(--page-horizontal-border-wide);
    --page-bottom-border-full: var(--page-horizontal-border-full);

    /* First Page Border Tokens - Hierarchical system for first page */

    /* Level 1: General first page border tokens (apply to all first page margins) */
    --page1-border-style: var(--page-border-style);
    --page1-border-color: var(--page-border-color);
    --page1-border-narrow: var(--page-border-narrow);
    --page1-border-wide: var(--page-border-wide);
    --page1-border-full: var(--page-border-full);

    /* Level 2: First page horizontal border tokens (apply to both top and bottom) */
    --page1-horizontal-border-style: var(--page1-border-style);
    --page1-horizontal-border-color: var(--page1-border-color);
    --page1-horizontal-border-narrow: var(--page1-border-narrow);
    --page1-horizontal-border-wide: var(--page1-border-wide);
    --page1-horizontal-border-full: var(--page1-border-full);

    /* Level 3: Specific first page border tokens (individual top/bottom overrides) */
    --page1-top-border-style: var(--page1-horizontal-border-style);
    --page1-top-border-color: var(--page1-horizontal-border-color);
    --page1-top-border-narrow: var(--page1-horizontal-border-narrow);
    --page1-top-border-wide: var(--page1-horizontal-border-wide);
    --page1-top-border-full: var(--page1-horizontal-border-full);
    --page1-bottom-border-style: var(--page1-horizontal-border-style);
    --page1-bottom-border-color: var(--page1-horizontal-border-color);
    --page1-bottom-border-narrow: var(--page1-horizontal-border-narrow);
    --page1-bottom-border-wide: var(--page1-horizontal-border-wide);
    --page1-bottom-border-full: var(--page1-horizontal-border-full);

    /* Page Layout Tokens - Control overall page flexbox behavior */
    --page-display: flex;
    --page-flex-direction: column;
    --page-section-gap: 0;
    --page-justify-content: flex-start;
    --page-align-items: stretch;
}

@page {
    size: var(--page-width) var(--page-height);

    margin-top: var(--page-margin-top);
    margin-right: var(--page-margin-right);
    margin-bottom: var(--page-margin-bottom);
    margin-left: var(--page-margin-left);

    padding-top: var(--page-padding-top);
    padding-bottom: var(--page-padding-bottom);

    /* Top margin boxes */
    @top-left-corner {
        content: none;
        border-bottom: var(--page-top-border-full, 0) var(--page-top-border-style) var(--page-top-border-color);
    }

    @top-left {
        content: var(--page-top-left-content);
        font-family: var(--page-margin-font-family);
        font-size: var(--page-margin-font-size);
        color: var(--page-margin-color);
        line-height: var(--page-margin-line-height);
        padding: var(--page-margin-padding);
        border-bottom: var(--page-top-border-wide, var(--page-top-border-full, 0)) var(--page-top-border-style) var(--page-top-border-color);
    }

    @top-center {
        content: var(--page-top-center-content);
        font-family: var(--page-margin-font-family);
        font-size: var(--page-margin-font-size);
        color: var(--page-margin-color);
        line-height: var(--page-margin-line-height);
        padding: var(--page-margin-padding);
        border-bottom: var(--page-top-border-narrow, var(--page-top-border-wide, var(--page-top-border-full, 0))) var(--page-top-border-style) var(--page-top-border-color);
    }

    @top-right {
        content: var(--page-top-right-content);
        font-family: var(--page-margin-font-family);
        font-size: var(--page-margin-font-size);
        color: var(--page-margin-color);
        line-height: var(--page-margin-line-height);
        padding: var(--page-margin-padding);
        border-bottom: var(--page-top-border-wide, var(--page-top-border-full, 0)) var(--page-top-border-style) var(--page-top-border-color);
    }

    @top-right-corner {
        content: none;
        border-bottom: var(--page-top-border-full, 0) var(--page-top-border-style) var(--page-top-border-color);
    }

    /* Left margin boxes */
    @left-top {
        content: none;
    }

    @left-middle {
        content: none;
    }

    @left-bottom {
        content: none;
    }

    /* Right margin boxes */
    @right-top {
        content: none;
    }

    @right-middle {
        content: none;
    }

    @right-bottom {
        content: none;
    }

    /* Bottom margin boxes */
    @bottom-left-corner {
        content: none;
        border-top: var(--page-bottom-border-full, 0) var(--page-bottom-border-style) var(--page-bottom-border-color);
    }

    @bottom-left {
        content: var(--page-bottom-left-content);
        font-family: var(--page-margin-font-family);
        font-size: var(--page-margin-font-size);
        color: var(--page-margin-color);
        line-height: var(--page-margin-line-height);
        padding: var(--page-margin-padding);
        border-top: var(--page-bottom-border-wide, var(--page-bottom-border-full, 0)) var(--page-bottom-border-style) var(--page-bottom-border-color);
    }

    @bottom-center {
        content: var(--page-bottom-center-content);
        font-family: var(--page-margin-font-family);
        font-size: var(--page-margin-font-size);
        color: var(--page-margin-color);
        line-height: var(--page-margin-line-height);
        padding: var(--page-margin-padding);
        border-top: var(--page-bottom-border-narrow, var(--page-bottom-border-wide, var(--page-bottom-border-full, 0))) var(--page-bottom-border-style) var(--page-bottom-border-color);
    }

    @bottom-right {
        content: var(--page-bottom-right-content);
        font-family: var(--page-margin-font-family);
        font-size: var(--page-margin-font-size);
        color: var(--page-margin-color);
        line-height: var(--page-margin-line-height);
        padding: var(--page-margin-padding);
        border-top: var(--page-bottom-border-wide, var(--page-bottom-border-full, 0)) var(--page-bottom-border-style) var(--page-bottom-border-color);
    }

    @bottom-right-corner {
        content: none;
        border-top: var(--page-bottom-border-full, 0) var(--page-bottom-border-style) var(--page-bottom-border-color);
    }
}

@page :first {
    @top-left-corner {
        border-bottom: var(--page1-top-border-full, 0) var(--page1-top-border-style) var(--page1-top-border-color);
    }

    @top-left {
        content: var(--page1-top-left-content);
        border-bottom: var(--page1-top-border-wide, var(--page1-top-border-full, 0)) var(--page1-top-border-style) var(--page1-top-border-color);
    }

    @top-center {
        content: var(--page1-top-center-content);
        border-bottom: var(--page1-top-border-narrow, var(--page1-top-border-wide, var(--page1-top-border-full, 0))) var(--page1-top-border-style) var(--page1-top-border-color);
    }

    @top-right {
        content: var(--page1-top-right-content);
        border-bottom: var(--page1-top-border-wide, var(--page1-top-border-full, 0)) var(--page1-top-border-style) var(--page1-top-border-color);
    }

    @top-right-corner {
        border-bottom: var(--page1-top-border-full, 0) var(--page1-top-border-style) var(--page1-top-border-color);
    }

    @bottom-left-corner {
        border-top: var(--page1-bottom-border-full, 0) var(--page1-bottom-border-style) var(--page1-bottom-border-color);
    }

    @bottom-left {
        content: var(--page1-bottom-left-content);
        border-top: var(--page1-bottom-border-wide, var(--page1-bottom-border-full, 0)) var(--page1-bottom-border-style) var(--page1-bottom-border-color);
    }

    @bottom-center {
        content: var(--page1-bottom-center-content);
        border-top: var(--page1-bottom-border-narrow, var(--page1-bottom-border-wide, var(--page1-bottom-border-full, 0))) var(--page1-bottom-border-style) var(--page1-bottom-border-color);
    }

    @bottom-right {
        content: var(--page1-bottom-right-content);
        border-top: var(--page1-bottom-border-wide, var(--page1-bottom-border-full, 0)) var(--page1-bottom-border-style) var(--page1-bottom-border-color);
    }

    @bottom-right-corner {
        border-top: var(--page1-bottom-border-full, 0) var(--page1-bottom-border-style) var(--page1-bottom-border-color);
    }
}

/* Named page for <stencila-page> elements with no margin or padding to allow
background color and images to bleed to the edge */
@page blank {
    margin: 0;
    padding: 0;
}

/* Page is displayed as a full height page in the browser so that it can be
  previewed with live reloading of styles etc */
stencila-page {
    page: blank;

    display: block;
    break-after: page;

    /* Force browsers to preserve background colors and images in print/PDF output.
     * By default, browsers strip backgrounds to save ink. These properties ensure
     * full-bleed colored backgrounds are rendered in the PDF. */
    print-color-adjust: exact;
    -webkit-print-color-adjust: exact;

    /* Use absolute page dimensions to ensure bleed to the edge */
    min-height: var(--page-height);
    max-height: var(--page-height);
    height: var(--page-height);

    /* Prevent overflow that causes background bleed onto next page */
    overflow: hidden;

    /* Ensure proper box model calculation */
    box-sizing: border-box;
}